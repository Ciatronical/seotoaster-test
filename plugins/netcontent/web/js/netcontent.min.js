var p2pWidgetFlag=null;$(document).ready(function(){isStatic();$("#p2p-content").change(function(){!0==$("#p2p-content").is(":checked")?($("#btn-submit").unbind("click"),saveWidget()):!0==p2pWidgetFlag?($("#btn-submit").unbind("click"),saveWidget()):$("#btn-submit").bind("click",function(){$("#frm_content").submit()})})});
function isStatic(){var b=null;$("#p2p-content").data("pageurl",parent.window.location.pathname.toLocaleString().substr(1));if(""==$("#container_name").val()){var a=$("#frm_content").attr("action"),a=/containerType\/\d{1}/i.exec(a);null!=a&&(b=a[0].substr(a[0].lastIndexOf("/")+1,a[0].length))}else b=$("#container_type").val();2==b&&$("div.p2p-check").css("display","block");$.getJSON($("#website_url").val()+"plugin/netcontent/run/isP2p/",{widgetName:getContainerName()},function(a){null!=a&&!0==a.responseText.exist&&
($("#p2p-content").attr("checked","checked"),p2pWidgetFlag=!0,$("#btn-submit").unbind("click"),saveWidget())})}function getContainerName(){var b=null;if(""==$("#container_name").val()){var a=$("#frm_content").attr("action"),a=/containerName\/[-_\d\w]+/.exec(a);null!=a&&(b=a[0].substr(a[0].lastIndexOf("/")+1,a[0].length))}else b=$("#container_name").val();return b}
function saveWidget(){$("#btn-submit").bind("click",function(){var b=null,a="";!0==$("#p2p-content").is(":checked")?(a=$("#website_url").val()+"plugin/netcontent/run/saveNetContent",b={widgetName:getContainerName(),widgetContent:$("#content").val(),pageUrl:$("#p2p-content").data("pageurl")},p2pWidgetFlag=!0):!0!=$("#p2p-content").is(":checked")&&!0==p2pWidgetFlag&&(a=$("#website_url").val()+"plugin/netcontent/run/deleteNetContent",b={widgetName:getContainerName()});$.ajax({type:"POST",url:a,dataType:"json",
data:b,beforeSend:function(){showSpinner()},success:function(a){0==a.error&&$("#frm_content").submit()},error:function(){}});return!1})};
